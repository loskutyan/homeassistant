title: 'Главная'
icon: mdi:home-assistant

cards:
  - type: vertical-stack
    title: 'Дата и время'
    cards:
      - type: entities
        show_header_toggle: false
        entities:
          - type: custom:multiple-entity-row
            name: 'Сейчас'
            entity: sensor.date
            state_header: 'Дата'
            icon: mdi:calendar-clock
            entities:
            - entity: sensor.sun_next_rising
              format: relative
              hide_unavailable: true
            - entity: sensor.sun_next_setting
              format: relative
              hide_unavailable: true
            - entity: sensor.time
              name: 'Время'
  
  - type: vertical-stack
    title: 'Качество воздуха'
    cards:
      - type: entities
        entities:
          - type: custom:multiple-entity-row
            name: 'Проветривание'
            entity: switch.bedroom_airpurifier_forced_ventilation
            show_state: false
            entities:
              - icon: mdi:bed-king
                state_color: true
                name: 'Спальня'
                tap_action:
                  action: toggle
              
              - icon: mdi:bed
                state_color: true
                name: 'Детская'
                entity: switch.kidsroom_airpurifier_forced_ventilation
                tap_action:
                  action: toggle
      
      - type: custom:mini-graph-card
        color_thresholds:
          - value: 450
            color: "#00FFFF"
          - value: 600
            color: "#00FF00"
          - value: 800
            color: "#FFFF00"
          - value: 1000
            color: "#FFD700"
          - value: 1200
            color: "#FF0000"
          - value: 9999
            color: "#800000"
        animate: true
        line_width: 2
        hour24: true
        points_per_hour: 1
        group_by: hour
        lower_bound: 400
        upper_bound: 1200
        entities:
          - entity: sensor.cleargrass_air_co2a
            name: 'CO² Спальня'
          - entity: sensor.qingping_air_lite_co2a
            name: 'CO² Детская'
      
      - type: horizontal-stack
        cards:
          - type: custom:mini-graph-card
            color_thresholds:
              - value: 1
                color: "#00FFFF"
              - value: 3
                color: "#00FF00"
              - value: 10
                color: "#FFFF00"
              - value: 25
                color: "#FFD700"
              - value: 75
                color: "#FF0000"
              - value: 999
                color: "#800000"
            animate: true
            line_width: 2
            hour24: true
            points_per_hour: 1
            group_by: hour
            lower_bound: 0.0
            upper_bound: 20.0
            entities:
              - entity: sensor.cleargrass_air_pm25
                name: 'PM2.5 Спальня'
              - entity: sensor.qingping_air_lite_pm25
                name: 'PM2.5 Детская'
          
          - type: custom:mini-graph-card
            color_thresholds:
              - value: 60
                color: "#00FFFF"
              - value: 100
                color: "#00FF00"
              - value: 200
                color: "#FFFF00"
              - value: 500
                color: "#FF0000"
            animate: true
            line_width: 2
            hour24: true
            points_per_hour: 1
            group_by: hour
            lower_bound: 0
            upper_bound: 500
            entities:
              - entity: sensor.cleargrass_air_tvoc
                name: 'tVOC'


  - type: vertical-stack
    title: 'Статус'
    cards:
      - type: entities
        entities:
          - entity: switch.somebody_home
          - entity: switch.kids_asleep
      
      - type: conditional
        conditions:
          - entity: binary_sensor.any_software_updates_available
            state: 'on'
        card:
          type: entities
          entities:
            - type: conditional
              conditions:
                - entity: binary_sensor.updater
                  state: 'on'
              row:
                type: custom:multiple-entity-row
                entity: sensor.current_ha
                name: 'Версия Home Assistant'
                show_state: false
                entities:
                  - entity: sensor.current_ha
                    name: 'Текущая'
                  - entity: binary_sensor.updater
                    attribute: newest_version
                    name: 'Последняя'
            - type: conditional
              conditions:
                - entity: binary_sensor.hacs_updates_available
                  state: 'on'
              row:
                entity: sensor.hacs
                name: 'Обновления HACS'
      
      - type: custom:auto-entities
        card:
          type: entities
        show_empty: false
        filter:
          include:
            - entity_id: sensor.*_filter_life_remaining_days
          exclude:
            - state: '> 30'
      
      - type: custom:auto-entities
        card:
          type: entities
        show_empty: false
        filter:
          include:
            - entity_id: sensor.*_battery
          exclude:
            - state: '> 30'
      
      - type: custom:auto-entities
        card:
          type: entities
        show_empty: false
        filter:
          include:
            - entity_id: sensor.vacuum_*_brush_left
            - entity_id: sensor.vacuum_filter_left
          exclude:
            - state: '> 25'


  - type: vertical-stack
    title: 'Raspberry Pi'
    cards:
      - type: horizontal-stack
        cards:
          - type: gauge
            name: 'Загрузка CPU'
            unit: '%'
            entity: sensor.processor_use_percent
            severity:
              green: 0
              yellow: 60
              red: 85
         
          - type: gauge
            name: 'Загрузка ОЗУ'
            unit: '%'
            entity: sensor.memory_use_percent
            severity:
              green: 0
              yellow: 60
              red: 85
              
      - type: horizontal-stack
        cards:
          - type: gauge
            name: 'Температура CPU'
            unit: '°C'
            entity: sensor.cpu_temperature
            min: 20
            max: 100
            severity:
              green: 0
              yellow: 50
              red: 60
          
          - type: gauge
            name: 'Температура GPU'
            unit: '°C'
            entity: sensor.gpu_temperature
            min: 20
            max: 100
            severity:
              green: 0
              yellow: 50
              red: 60
            
      - type: horizontal-stack
        cards:
          - type: gauge
            name: 'Диск заполнен'
            unit: '%'
            entity: sensor.disk_use_percent
            severity:
              green: 0
              yellow: 60
              red: 85    
            
          - type: gauge
            name: 'Свободное место'
            unit: 'Гб'
            entity: sensor.disk_free
            min: 0
            max: 458
            severity:
              red: 1
              yellow: 20
              green: 100
